	.Z80				; mnemonics onlySIMHPort	equ	0fehprintStringCmd	equ	09hbdos		equ	5cr		equ	13lf		equ	10cmdLine		equ	80hstarttimercmd	equ	1quitTimerCmd	equ	2printTimerCmd	equ	15	aseg	org	100h	jp	startusage:	db	'Usage: TIMER S|P|Q',cr,lf	db	'  S = Start a new timer',cr,lf	db	'  P = Print time of most recent timer',cr,lf	db	'  Q = Quit most recent timer',cr,lf,'$',1AHstart:	ld	a,(cmdLine)		; get number of characters on command line	or	a	jp	z,pusage		; print usage, if command line empty	ld	a,(cmdLine+2)		; get first character	ld	hl,table		; <HL> points to (letter, command)^3	ld	b,3			; 3 elements in tableagain:	cp	(hl)			; compare command line letter with table entry	inc	hl			; point to command	jp	z,found			; if found	inc	hl			; otherwise proceed to next entry	dec	b			; decrement loop counter	jp	nz,again		; try next characterpusage:	ld	de,usage		; address of usage text	ld	c,printStringCmd	; CP/M command for print	jp	bdos			; print it, get ret from bdosfound:	ld	a,(hl)			; get SIMH command	out	(SIMHPort),a		; send to SIMH port	ret				; and donetable:	db	'S',starttimercmd	db	'P',printTimerCmd	db	'Q',quitTimerCmdtimend	equ	$	ds	0200h-timend		; fill remainder with zeroes	end